<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <title>Role</title>
    <style>
        *{
            background-color: bisque;
             margin: 0px;
            padding: 40px; 
            justify-content: center;
            align-items: center;
            align-content: center;

        }
        .conatiner{
            display: flex;
            flex-direction: row;
            /*justify-content: center;*/
            /*align-content: center;*/
            align-items: center;
            height:10vh; 
            width:50vh;
            justify-items: center;
            
        }
        .images{
            display: flex;

        }
        button{
            border:none;
            cursor: pointer;
            margin: 0;
            padding: 0;

        }
        .role{
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="role">
        <h1> CHOOSE YOUR ROLE </h1>
        
            <div class="images">
               <button type ="submit" id="employee"><img src="loyee.png"></button>
                <button type ="submit" id="employer"> <img src="loyer.png"></button>
            </div>
        </div>
    </div>
    <script>
        window.onload = function() {
     if (sessionStorage.getItem('token') == null) {
        window.location.href = 'http://127.0.0.1:3000/frontend/index5.html';
    }
};
        document.getElementById("employee").addEventListener("click",async function(e){
            e.preventDefault();
            const role="Employee"
            const token=sessionStorage.getItem('token')
            const response=await fetch("http://127.0.0.1:8081/role",{
                method: 'POST',
                headers: {
                    'Content-Type':'application/json',
                    'Authorization':'Bearer'+ token
                },
                body: JSON.stringify({role})
            });
            if(response.ok){
                alert("Role assigned")
                window.location.href="http://127.0.0.1:3000/frontend/homepage.html";
            }

        })
        document.getElementById("employer").addEventListener("click",async function(e){
            e.preventDefault();
            const role="Employer"
            const token=sessionStorage.getItem('token')
            const response=await fetch("http://127.0.0.1:8081/role",{
                method: 'POST',
                headers: {
                    'Content-Type':'application/json',
                    'Authorization':'Bearer'+ token

                },
                body: JSON.stringify({role})
            });
            if(response.ok){
                alert("Role assigned")
                window.location.href="http://127.0.0.1:3000/frontend/homepage.html";
            }

        })
       
    </script>
</body>
</html>